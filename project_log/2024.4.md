# 2024.4 日志记录

## 2024.4.2

最近在学习构思项目接下来的部分，预计该项目将会是一个比较庞大复杂的任务。

今天重新构建了异步日志，增加了日志的功能，在不损耗太多的性能的前提下，使得日志线程可以服务多个 Log 对象，降低了耦合度，使得异步发送线程
不仅能够写入记录日志，还可以服务于耗时的文件写入操作（为以后的项目做铺垫）。

* 增加了 Sender 虚基类（主要是为了增加扩展性）。
* 增加了 SendThread 类（与 Log 分离，通过 Sender 中间件实现功能，提供定时刷新功能）。
* 重构 Log_buffer 类为 SenderBuffer（由用户写入，SendThread 进行自动发送）。
* 新加入了 List（双向队列）模板容器（主要是为了解决节点在同一个 List 对象中移动时不会出现指针、引用、迭代器失效的问题）。

## 2024.4.4

通过对 MySQL 和 Redis 的学习，对接下来的项目有了一个大体的思路：

* 实现一个轻量级的简单数据库。
* 计划在内存数据库的基础上将功能放大，提供更强大的硬盘持久化。
* 能够处理大量的客户端并发请求。
* 将客户端连接权限分级，修改数据与请求数据分开，加快响应速度。
* 提供丰富的数据储存结构。
* 实现事务功能。
* 实现锁保护机制。
* 实现意外情况下的数据保护机制。
* 拥有主从库的同步功能。

接下来打算先从数据在硬盘中的存储入手，确定储存方式，可能会同时实现内存池功能。

* 增加了 SingleList（单链表，解决移动时不会出现指针、引用、迭代器失效的问题）。
* 新增了 ioFile（可同时读写，为下一步做准备）。
